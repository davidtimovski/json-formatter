<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:JsonFormatter.ViewModels.UserControls"
             xmlns:local="using:JsonFormatter.UserControls"
             x:Class="JsonFormatter.UserControls.ValueNode">

    <UserControl.Styles>
        <Style Selector="Border.valueRow">
            <Setter Property="Margin" Value="0 3 0 3" />
        </Style>
        <Style Selector="Border.valueRow:pointerover">
            <Setter Property="Background" Value="#444" />
        </Style>
        
        <Style Selector="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
        
        <Style Selector="TextBox">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Height" Value="20" />
            <Setter Property="MinHeight" Value="20" />
            <Setter Property="MinWidth" Value="10" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="3 0" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="SelectionBrush" Value="{DynamicResource SelectionBrush}" />
            <Setter Property="SelectionForegroundBrush" Value="{DynamicResource SelectionForegroundBrush}" />
        </Style>
        <Style Selector="TextBox /template/ Border#PART_BorderElement">
            <Setter Property="BorderThickness" Value="0" />
        </Style>
        
        <Style Selector="TextBox.nullValue">
            <Setter Property="Foreground" Value="{DynamicResource GreyColor}" />
        </Style>
        <Style Selector="TextBox.stringValue">
            <Setter Property="Foreground" Value="{DynamicResource StringColor}" />
        </Style>
        <Style Selector="TextBox.numberValue">
            <Setter Property="Foreground" Value="{DynamicResource NumberColor}" />
        </Style>
        <Style Selector="TextBox.boolValue">
            <Setter Property="Foreground" Value="{DynamicResource NumberColor}" />
        </Style>
    </UserControl.Styles>

    <Design.DataContext>
        <vm:ValueNodeViewModel />
    </Design.DataContext>

    <Grid>
        <Border IsVisible="{Binding IsPrimitive}" Classes="valueRow">
            <DockPanel>
                <TextBlock Text="{Binding Indentation}" />
            
                <DockPanel IsVisible="{Binding IsProperty}">
                    <TextBlock Text="{Binding PropertyName}" Classes="property" />
                    <TextBlock Text=": " Classes="property" />
                </DockPanel>

                <TextBox IsVisible="{Binding IsNullValue}" PointerReleased="TextBox_OnPointerReleased" Text="null" IsReadOnly="True" Classes="nullValue" />
                <TextBox IsVisible="{Binding IsStringValue}" PointerReleased="TextBox_OnPointerReleased" Text="{Binding StringValue}" IsReadOnly="True" Classes="stringValue" />
                <TextBox IsVisible="{Binding IsNumberValue}" PointerReleased="TextBox_OnPointerReleased" Text="{Binding NumberValue}" IsReadOnly="True" Classes="numberValue" />
                <TextBox IsVisible="{Binding IsBooleanValue}" PointerReleased="TextBox_OnPointerReleased" Text="{Binding BooleanValue}" IsReadOnly="True" Classes="boolValue" />
            
                <TextBlock>,</TextBlock>
            </DockPanel>
        </Border>

        <Panel IsVisible="{Binding !IsPrimitive}">
            <Panel IsVisible="{Binding IsArrayValue}">
                <local:ArrayNode DataContext="{Binding ArrayValue}" />
            </Panel>

            <Panel IsVisible="{Binding IsObjectValue}">
                <local:ObjectNode DataContext="{Binding ObjectValue}" />
            </Panel>
        </Panel>
    </Grid>

</UserControl>